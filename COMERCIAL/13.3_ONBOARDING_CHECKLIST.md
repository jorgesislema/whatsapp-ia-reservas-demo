# 13.3 Checklist Onboarding del Cliente

## Cronograma: D-7 a Go-Live (D-0) + Semanas 1-2

---

## üìã **FASE 1: PREVIO (D-7 a D-3)**

### Meta Business Setup

- [ ] **D-7:** Cliente registrado en Meta Business Suite
  - Verificar cuenta principal active
  - Tel√©fono principal identificado
  - Documento registro: `/assets/meta_account_CLIENTE.txt`

- [ ] **D-6:** App WhatsApp creada en Meta
  - App ID: `_________________`
  - Phone Number ID: `_________________`
  - Business Account ID: `_________________`
  - Documento: `/assets/meta_app_CLIENTE.md`

- [ ] **D-6:** N√∫mero WhatsApp verificado
  - N√∫mero: `_________________`
  - Verificaci√≥n SMS/llamada completada
  - Status: ‚úì Verified en Meta

- [ ] **D-5:** Access Tokens generados
  - User Access Token: Guardado en Secret Manager
  - Permanent Business Account Access Token: Guardado
  - Expiry: Verificar renovaci√≥n (60 d√≠as)

- [ ] **D-5:** Webhook URL configurada en Meta
  - URL: `https://wa-backend-[CLIENTE].a.run.app/webhook`
  - Verify Token: Generado y guardado en Secret Manager
  - Eventos suscritos: messages, message_status, message_template_status_update

- [ ] **D-4:** Webhook verificado (GET /events)
  - Test: `curl https://wa-backend-[CLIENTE].a.run.app/events?hub.challenge=test`
  - Status: 200 OK ‚úì

### Infraestructura GCP

- [ ] **D-6:** Proyecto GCP creado (si no existe)
  - Proyecto ID: `[cliente-wa-YYYYMMDD]`
  - Billing Account: Vinculada
  - Facturaci√≥n: A nombre de cliente (si Enterprise)

- [ ] **D-6:** Acceso IAM cliente
  - Email cliente: `_________________`
  - Rol: roles/viewer (lectura solo)
  - Alternativa: roles/editor (si auto-managed)
  - Status: ‚úì Acceso concedido

- [ ] **D-5:** Cloud Run service creado
  - Service name: `wa-backend-[cliente]`
  - Region: `us-central1`
  - CPU: 1 vCPU, 512 MB RAM
  - Scaling: 1-3 instancias
  - Status: ‚úì Deployed

- [ ] **D-5:** Cloud SQL instance creado
  - Instance: `[cliente]-db`
  - Tier: db-g1-small (PRO/Ent) o shared (Base)
  - Database: `wa_reservas`
  - Backups: Autom√°ticos daily, retention 30 d√≠as

- [ ] **D-5:** Secret Manager populated
  - [ ] `WA_TOKEN`: Business Account Access Token
  - [ ] `WA_APP_SECRET`: App secret
  - [ ] `WA_VERIFY_TOKEN`: Webhook verify token
  - [ ] `ADMIN_TOKEN`: Panel access token (random UUID)
  - [ ] `DATABASE_URL`: postgresql://user:pass@host:5432/db
  - [ ] Versiones: latest, rotated on [date]

- [ ] **D-5:** Firewall/VPC rules configurados
  - Cloud Run puede acceder Cloud SQL: ‚úì
  - Meta webhooks permitidos (IP ranges): ‚úì
  - Rate limiting activado: 120 req/min global

- [ ] **D-4:** Backups Cloud SQL verificados
  - Backup autom√°tico: ‚úì Daily
  - Restauraci√≥n probada: ‚úì Test restore exitoso
  - PITR window: ‚úì 7 d√≠as

### Documentos & Accesos

- [ ] **D-6:** Cliente recibe credenciales de acceso
  - Email con: URL panel, usuario, contrase√±a temporal
  - Documento: Instrucciones de primer login
  - 2FA: Habilitado (opcional para Enterprise)

- [ ] **D-5:** Punto de contacto confirmado
  - Nombre: `_________________`
  - Email: `_________________`
  - Tel√©fono: `_________________`
  - Disponibilidad: Confirmar 9-17 (huso horario local)

- [ ] **D-4:** NDA & T√©rminos de Servicio firmados
  - NDA: ‚úì Firmado
  - ToS: ‚úì Aceptado
  - Pol√≠tica privacidad: ‚úì Acuerdos de recolecci√≥n de datos

- [ ] **D-4:** Presupuesto aprobado
  - Setup: $[X]
  - Mensual: $[Y]
  - PO/SO recibida
  - Facturaci√≥n autorizada

---

## üìä **FASE 2: DATOS INICIALES (D-2)**

### Men√∫ & Servicios

- [ ] **D-2 AM:** Men√∫ recibido en formato autorizado
  - Formato: CSV / Excel / Google Sheets
  - Campos: name, category, price, allergens, visible
  - Validaci√≥n:
    - [ ] Caracteres especiales (√±, √©, etc): OK
    - [ ] Precios validados (decimales): OK
    - [ ] Categor√≠as limitadas a [N] m√°ximo: OK
  - Archivo: `/data/cliente/menu_20250102.csv`

- [ ] **D-2 AM:** Servicio/intenciones definidas
  - [ ] Tipos de reserva: (ej: almuerzo, cena, eventos, fast-casual)
  - [ ] Personalizaciones: (ej: sin gluten, alergias, VIP)
  - [ ] Opciones de zona: (ej: interior, terraza, barra)
  - [ ] N√∫mero m√≠nimo personas: [X]
  - [ ] N√∫mero m√°ximo: [Y]
  - Documento: `/data/cliente/servicios_CLIENTE.md`

### Horarios & Excepciones

- [ ] **D-2 AM:** Horarios base confirmados
  - [ ] Lunes: ABRE [--:--] CIERRA [--:-]
  - [ ] Martes: ABRE [--:--] CIERRA [--:-]
  - [ ] Mi√©rcoles: ABRE [--:--] CIERRA [--:-]
  - [ ] Jueves: ABRE [--:--] CIERRA [--:-]
  - [ ] Viernes: ABRE [--:--] CIERRA [--:-]
  - [ ] S√°bado: ABRE [--:--] CIERRA [--:-]
  - [ ] Domingo: ABRE [--:--] CIERRA [--:-]
  - Archivo: `/data/cliente/hours_base_20250102.csv`

- [ ] **D-2 AM:** Feriados pr√≥ximos 3 meses
  - Formato: date, is_closed, open, close, note
  - Ejemplo:
    ```
    2025-12-25,true,,,Navidad - Cerrado
    2025-12-24,false,12:00,18:00,Noche Buena - Cierre anticipado
    ```
  - Validar: Fechas correctas, zonas horarias
  - Archivo: `/data/cliente/exceptions_20250102.csv`

- [ ] **D-2 AM:** Temporadas (si Pro/Ent)
  - Verano/invierno/fiestas patrias: Horarios especiales
  - Formato: start_date, end_date, open, close, note
  - Archivo: `/data/cliente/seasons_20250102.csv`

### Pol√≠ticas de Negocio

- [ ] **D-2 PM:** Pol√≠ticas de reserva documentadas
  - Advance booking m√≠nimo: [X] horas
  - Duraci√≥n estimada por reserva: [X] minutos
  - Cancelaci√≥n: Hasta [X] horas antes reembolso completo
  - No-show: P√©rdida de [X]% o cancelaci√≥n
  - Cambios: Permitidos hasta [X] minutos antes
  - Documento: `/data/cliente/politicas_CLIENTE.md`

- [ ] **D-2 PM:** Datos de contacto & escalamiento
  - Tel√©fono del restaurante: `_________________`
  - Email contacto: `_________________`
  - Persona autorizada para cambios: `_________________`
  - Escalamiento (si problema): Contactar a `_________________`

### Plantillas WhatsApp (HSM)

- [ ] **D-2 PM:** Plantillas HSM definidas
  - Plantillas requeridas:
    - [ ] `reservation_confirmed` ‚Äî Confirmaci√≥n de reserva
    - [ ] `reservation_reminder_24h` ‚Äî Recordatorio 24h antes
    - [ ] `booking_changed` ‚Äî Notificaci√≥n de cambio
    - [ ] `closed_holiday` ‚Äî Aviso de cierre especial
    - [ ] `follow_up_info` ‚Äî Seguimiento fuera de 24h window
  - Documento: `/data/cliente/hsm_templates_CLIENTE.md`

- [ ] **D-1 AM:** Plantillas enviadas a Meta para aprobaci√≥n
  - Estado: ‚úì Submitted
  - Fecha de env√≠o: [date]
  - Tiempo esperado aprobaci√≥n: 2-24h

- [ ] **D-1 PM:** Plantillas aprobadas por Meta
  - [ ] `reservation_confirmed`: ‚úì APPROVED
  - [ ] `reservation_reminder_24h`: ‚úì APPROVED / ‚è≥ PENDING
  - [ ] `booking_changed`: ‚úì APPROVED
  - [ ] `closed_holiday`: ‚úì APPROVED
  - [ ] `follow_up_info`: ‚úì APPROVED
  - Nota: Si alguna REJECTED, revisar feedback Meta y resubmit

### Mensajer√≠a & Tono

- [ ] **D-2 PM:** Mensajes de ejemplo acordados con cliente
  - Reserva exitosa: `_________________`
  - Sin disponibilidad: `_________________`
  - Handoff a humano: `_________________`
  - Feriado cierre: `_________________`
  - Documento: `/data/cliente/mensajes_CLIENTE.md`

- [ ] **D-2 PM:** Tono & personalizaci√≥n
  - Formal / casual: [Cliente elige]
  - Emojis: [S√≠ / No]
  - Nombre del bot: [Si aplica]
  - Horario de respuesta esperado: [X] segundos
  - Confirmaci√≥n visual (ej: ‚úì Listo!): [S√≠ / No]

---

## üöÄ **FASE 3: ACTIVACI√ìN (D-1 a Go-Live D-0)**

### Despliegue

- [ ] **D-1 AM:** Backend deployado a producci√≥n
  - Imagen Docker: `wa-backend:v[X.X.X]-[cliente]`
  - Revisi√≥n: `wa-backend-prod-[cliente]-[hash]`
  - Health check: `curl https://wa-backend-[cliente].a.run.app/healthz`
  - Status: ‚úì 200 OK (latency < 500ms)

- [ ] **D-1 AM:** Panel Streamlit desplegado
  - URL: `https://wa-panel-[cliente].streamlit.app`
  - Login: ‚úì Funciona con credenciales
  - Pantallas: ‚úì Todas accesibles
  - Status: ‚úì Production-ready

- [ ] **D-1 AM:** Base de datos inicializada
  - Schema: ‚úì Migrations aplicadas
  - Tablas: ‚úì Todas creadas (usuarios, reservas, menu, horarios, etc)
  - Datos sample: ‚úì Cargados (si testing)
  - Backups: ‚úì Primera copia exitosa

### Carga de Datos Producci√≥n

- [ ] **D-1 PM:** Men√∫ importado v√≠a panel
  - Cliente loguea en panel
  - Secci√≥n: Men√∫ ‚Üí Importar CSV
  - Archivo: `menu_20250102.csv`
  - Preview: ‚úì Precios, categor√≠as correctas
  - Confirmar: ‚úì Guardado en BD

- [ ] **D-1 PM:** Horarios base cargados
  - Secci√≥n: Horarios ‚Üí Configurar
  - Ingresa L-D horarios base
  - Feriados: ‚úì Cargados (pr√≥x. 3 meses)
  - Guardar: ‚úì BD actualizada

- [ ] **D-1 PM:** Pol√≠ticas/notas cargadas
  - Secci√≥n: Config ‚Üí Informaci√≥n General
  - Pol√≠tica cancelaci√≥n: [Texto]
  - Tel√©fono contacto: [Tel]
  - Email: [Email]
  - Guardar: ‚úì

- [ ] **D-1 PM:** KB reconstruida
  - Secci√≥n: Administraci√≥n ‚Üí Knowledge Base
  - Click: "Reconstruir KB"
  - Status: ‚úì Rebuilt in [X] seconds
  - Verificar: RAG queries funcionan

### UAT Guiado

- [ ] **D-1 PM:** Cliente ejecuta 16 test cases cr√≠ticos
  - Facilitador: Nuestro QA engineer
  - Duraci√≥n: ~2 horas
  - Casos:
    - [ ] 1.1-1.5: Webhook basics (t√©cnico)
    - [ ] 2.1-2.5: Mensajer√≠a b√°sica
    - [ ] 3.1-3.6: Intenciones avanzadas
  - Resultado: ‚úì 16/16 PASS
  - Documento: `/data/cliente/uat_results_20250102.md`

- [ ] **D-0 AM:** Prueba de "humo" final
  - [ ] GET /events verification
  - [ ] POST /webhook con reserva de prueba
  - [ ] Panel: Publicar cambio men√∫ + verificar visibilidad
  - [ ] Handoff: Test manual mode
  - Status: ‚úì Todos OK

### Activaci√≥n Oficial

- [ ] **D-0 PM:** N√∫mero WhatsApp activado
  - Cliente comparte n√∫mero QR o enlace "Chatea con nosotros"
  - Canales: (ej: website, redes sociales, puerta restaurante)
  - Testing: 5-10 mensajes de prueba
  - Documento: `/data/cliente/activation_20250102.txt`
  - Status: ‚úì Go-Live

- [ ] **D-0 PM:** Monitoreo 24/7 iniciado
  - Alertas: Activadas en Cloud Monitoring
  - Escalamiento: On-call engineer asignado
  - Duraci√≥n: 72 horas cr√≠ticas (D-0 PM a D+2 PM)
  - Slack channel: `#cliente-[nombre]-support` creado

- [ ] **D-0 PM:** Comunicaci√≥n oficial
  - Email al cliente: "¬°Sistema en vivo! Contacto de soporte: [email]"
  - Slack: Invitar equipo cliente a canal
  - Tel√©fono: Confirmar disponibilidad post-go-live

---

## üì± **FASE 4: SEGUIMIENTO (Semana 1-2)**

### Monitoreo Intensivo

- [ ] **D+1:** Revisi√≥n 24h post-go-live
  - M√©trica: Disponibilidad 100%
  - M√©trica: P95 latencia < [SLA]
  - M√©trica: Error rate 0%
  - Incidentes: [0]
  - Documento: `/logs/cliente/day1_report.md`

- [ ] **D+3:** An√°lisis iniciales
  - Total conversaciones: [X]
  - FCR rate: [X]%
  - Handoff rate: [X]%
  - Top intenciones: [1] [2] [3]
  - Problemas detectados: [Si hay]
  - Documento: `/logs/cliente/week1_metrics.md`

### Ajustes y Optimizaci√≥n

- [ ] **D+3:** Iteraci√≥n 1 (si feedback negativo)
  - Intenciones: ¬øQu√© fall√≥?
  - Mensajes: ¬øQu√© no gust√≥?
  - Horarios/men√∫: ¬øCambios necesarios?
  - Implementaci√≥n: [X] ajustes hechos
  - Documentaci√≥n: `/data/cliente/adjustments_iteration1.md`

- [ ] **D+5:** Reuni√≥n de sincronizaci√≥n
  - Participantes: Cliente, tu QA, account manager
  - T√≥picos: M√©tricas, feedback, pr√≥ximos pasos
  - Decisiones: [Acuerdos de optimizaci√≥n]
  - Acta: `/meetings/cliente/sync_20250105.md`

- [ ] **D+7:** M√©tricas iniciales consolidadas
  - Disponibilidad: [X]% (vs SLA [Y]%)
  - FCR: [X]% (vs meta 85%)
  - Handoff: [X]% (vs meta 10-15%)
  - P95: [X]ms (vs SLA < [Y]ms)
  - Reservas confirmadas: [X] (revenue impact)
  - Documento: `/logs/cliente/week1_final_report.md`

### Handover a Soporte

- [ ] **D+10:** Transici√≥n a soporte nivel 1
  - Training: Nivel 1 support del cliente
  - Escalamiento: ¬øC√≥mo contactar a [email]?
  - Tickets: Herramienta (Jira, Zendesk, email)
  - SLA: Tiempo respuesta 1¬™, resoluci√≥n
  - Documentaci√≥n: `/support/cliente/sop_CLIENTE.md`

- [ ] **D+14:** Cierre formal de onboarding
  - Firma: ‚úì Cliente acepta sistema en producci√≥n
  - Documento: `/data/cliente/onboarding_signoff_20250115.pdf`
  - Transici√≥n: ‚úì Soporte normal (no intensive)
  - Pr√≥xima revisi√≥n: D+30 (first month metrics review)

---

## üìù **CHECKLIST DE DOCUMENTOS**

Entregar al cliente en carpeta `/client_handover/[cliente]/`:

```
‚îú‚îÄ 00_BIENVENIDA.md                    # Intro, contactos, pr√≥ximos pasos
‚îú‚îÄ 01_PANEL_QUICK_START.md             # 5 pasos para usar el panel
‚îú‚îÄ 02_OPERACION_DIARIA.md              # Men√∫, horarios, modo humano
‚îú‚îÄ 03_TROUBLESHOOTING.md               # FAQ, errores comunes, soluciones
‚îú‚îÄ 04_SLA_Y_SOPORTE.md                 # SLA, horarios, c√≥mo reportar
‚îú‚îÄ 05_PLANTILLAS_CSV.md                # Templates menu/hours/exceptions
‚îú‚îÄ 06_MENSAJES_EJEMPLO.md              # Ejemplos conversacionales
‚îú‚îÄ 07_CUMPLIMIENTO_24H.md              # Compliance WhatsApp
‚îú‚îÄ 08_MATRICES_RIESGO.md               # Riesgos conocidos + mitigaci√≥n
‚îú‚îÄ 09_ROADMAP.md                       # Mejoras futuras, upgrades
‚îú‚îÄ 10_CONTACTOS.md                     # Qui√©n contactar, horarios
‚îî‚îÄ 11_APENDICES/
    ‚îú‚îÄ credentials.txt                 # Usuario/contrase√±a (ENCRYPTED)
    ‚îú‚îÄ uat_results.md                  # UAT signoff
    ‚îú‚îÄ metrics_baseline.csv            # M√©tricas iniciales
    ‚îî‚îÄ support_ticket_template.md      # Template para reportar issues
```

---

## ‚úÖ **FIRMA DE ONBOARDING**

```
Completado por:  __________________ Fecha: __________
(Nuestro PM)

Aprobado por cliente: __________________ Fecha: __________
(Nombre, T√≠tulo)

Transici√≥n a Soporte: __________________ Fecha: __________
(Nombre, Equipo Support)
```

---

**√öltima actualizaci√≥n:** 2025-01-02  
**Versi√≥n:** 1.0  
**Estado:** ‚úÖ Listo para usar
